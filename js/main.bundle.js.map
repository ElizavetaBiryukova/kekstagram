{"version":3,"file":"main.bundle.js","mappings":"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","sources":["webpack://kekstagram/./source/js/load-image.js","webpack://kekstagram/webpack/bootstrap","webpack://kekstagram/./source/js/util.js","webpack://kekstagram/./source/js/big-picture.js","webpack://kekstagram/./source/js/scale.js","webpack://kekstagram/./source/js/effects.js","webpack://kekstagram/./source/js/editor.js","webpack://kekstagram/./source/js/validation.js","webpack://kekstagram/./source/js/fetch.js","webpack://kekstagram/./source/js/submit-form.js","webpack://kekstagram/./source/js/preview.js","webpack://kekstagram/./source/js/filter.js","webpack://kekstagram/./source/js/main.js","webpack://kekstagram/./source/js/error.js"],"sourcesContent":["const FILE_TYPES = ['jpg', 'jpeg', 'png'];\n\nconst uploadInput = document.querySelector('#upload-file');\nconst previewImage = document.querySelector('.img-upload__preview img');\nconst previews = document.querySelectorAll('.effects__preview');\n\nuploadInput.addEventListener('change', () => {\n  const file = uploadInput.files[0];\n  const fileName = file.name.toLowerCase();\n  const matches = FILE_TYPES.some((it) => {\n    return fileName.endsWith(it);\n  });\n\n  if (matches) {\n    const reader = new FileReader();\n\n    reader.addEventListener('load', () => {\n      previewImage.src = reader.result;\n\n      previews.forEach((filter) => {\n        filter.style.backgroundImage = `url(${reader.result})`;\n      });\n    });\n\n    reader.readAsDataURL(file);\n  }\n});\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const Keys = {\n  ESCAPE: 'Escape',\n  ESC: 'Esc'\n};\n\n//Случайное число\nconst getRandomInt = (min, max) => {\n  if (min < 0 || max < 0) {\n    return -1;\n  }\n\n  if (max < min) {\n    [min, max] = [max, min];\n  }\n\n  return Math.floor(Math.random() * (max - min +1)) + min;\n};\n\n//Проверка строки\nconst stringCount = (text, num) => {\n  return text.length <= num;\n};\n\n//Случайный элемент массива\nconst getRandomElementArr = (array) => {\n  return array[getRandomInt(0, array.length -1)];\n};\n\nconst shuffleArray = (array) => {\n  var currentIndex = array.length, temporaryValue, randomIndex;\n\n  while (0 !== currentIndex) {\n\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex -= 1;\n\n    temporaryValue = array[currentIndex];\n    array[currentIndex] = array[randomIndex];\n    array[randomIndex] = temporaryValue;\n  }\n\n  return array;\n};\n\n//Функция устранения дребезга\nconst DEBOUNCE_INTERVAL = 500;\n\nconst debounce = (cb) => {\n  let lastTimeout = null;\n\n  return (...args) => {\n    if (lastTimeout) {\n      window.clearTimeout(lastTimeout);\n    }\n    lastTimeout = window.setTimeout(() => {\n      cb(...args);\n    }, DEBOUNCE_INTERVAL);\n  };\n};\n\nexport { getRandomInt, getRandomElementArr, stringCount, Keys, shuffleArray, debounce };\n\n","const COMMENT_LOAD_STEP = 5;\n\nconst bigPicture = document.querySelector('.big-picture');\nconst body = document.querySelector('body');\nconst closingBigPicture = bigPicture.querySelector('.big-picture__cancel');\nconst commentCount = document.querySelector('.social__comment-count');\nconst commentsLoader = document.querySelector('.comments-loader');\nconst commentsList = document.querySelector('.social__comments');\nconst commentsTemplate = document.querySelector('#comment').content.querySelector('.social__comment');\nlet commentsLoaded = [];\nlet commentsCount = COMMENT_LOAD_STEP;\n\n//Закрытие фотографии\nconst closeBigPicture = () => {\n  bigPicture.classList.add('hidden');\n  body.classList.remove('modal-open');\n  closingBigPicture.addEventListener('click', closeBigPicture);\n  commentsList.innerHTML = '';\n  commentsCount = COMMENT_LOAD_STEP;\n  commentsLoaded = [];\n\n};\n\n//Клонирует комментарий\nconst createComment = (comment) => {\n  const commentElement = commentsTemplate.cloneNode(true);\n  commentElement.querySelector('.social__picture').src = comment.avatar;\n  commentElement.querySelector('.social__picture').alt = comment.name;\n  commentElement.querySelector('.social__text').textContent = comment.message;\n\n  return commentElement;\n};\n\n//Заполняет комментариями всю разметку для них\nconst createComments = (comments) => {\n\n  const onCommentsLoaderClick = () => {\n    createComments(comments);\n  };\n\n  commentsCount = (comments.length < COMMENT_LOAD_STEP) ? comments.length : commentsCount;\n  commentsLoaded = comments.slice(0, commentsCount);\n\n  commentsList.innerHTML = '';\n  commentCount.textContent = `${commentsLoaded.length} из ${comments.length} комментариев`;\n\n  let commentsFragment = document.createDocumentFragment();\n  commentsLoaded.forEach(comment => {\n    commentsFragment.appendChild(createComment(comment));\n  });\n\n  commentsList.appendChild(commentsFragment);\n\n  if (comments.length > COMMENT_LOAD_STEP && commentsLoaded.length < comments.length) {\n    commentsLoader.classList.remove('hidden');\n    commentsLoader.addEventListener('click', onCommentsLoaderClick, {once: true});\n\n  } else {\n    commentsLoader.classList.add('hidden');\n  }\n\n  commentsCount += COMMENT_LOAD_STEP;\n};\n\n//Показыват фотографию в большом размере\nconst showBigPicture = (picture) => {\n  commentsCount = COMMENT_LOAD_STEP;\n  commentsLoaded = [];\n  body.classList.add('modal-open');\n  bigPicture.querySelector('.big-picture__img img').src = picture.url;\n  bigPicture.querySelector('.likes-count').textContent = picture.likes;\n  bigPicture.querySelector('.social__caption').textContent = picture.description;\n\n  closingBigPicture.addEventListener('click', closeBigPicture);\n  bigPicture.classList.remove('hidden');\n  createComments(picture.comments.slice());\n};\n\nexport {\n  showBigPicture,\n  body\n};\n","const Scale = {\nMAX: 100,\nMIN: 0,\nSTEP: 5\n};\n\nconst scaleControlSmaller = document.querySelector('.scale__control--smaller');\nconst scaleControlBigger = document.querySelector('.scale__control--bigger');\nconst scaleControlValue = document.querySelector('.scale__control--value');\nconst previewImage = document.querySelector('.img-upload__preview img');\n\nconst typingScaleValue = (scaleValue) => {\n  scaleControlValue.value = scaleValue + '%';\n  previewImage.style.transform = `scale(${scaleValue / 100})`;\n};\n\nscaleControlSmaller.addEventListener('click', () => {\n  let scaleValue = parseInt(scaleControlValue.value, 10) - Scale.STEP;\n\n  if (scaleValue < Scale.MIN) {\n    scaleValue = Scale.MIN;\n  }\n\n  typingScaleValue(scaleValue);\n});\n\nscaleControlBigger.addEventListener('click', () => {\n  let scaleValue = parseInt(scaleControlValue.value, 10) + Scale.STEP;\n\n  if (scaleValue > Scale.MAX) {\n    scaleValue = Scale.MAX;\n  }\n\n  typingScaleValue(scaleValue);\n});\n\nconst resetSettingScal = () => {\n  scaleControlValue.value = '100%';\n  previewImage.style.transform = 'scale(1.00)';\n};\n\nexport { previewImage, resetSettingScal };\n","/* global noUiSlider:readonly */\n\nimport { previewImage } from './scale.js';\n\nconst SettingsSlide = {\n  CHROME: {\n    MIN: 0,\n    MAX: 1,\n    STEP: 0.1,\n    START: 1,\n    FILTER: 'grayscale',\n    EFFECT: 'effects__preview--chrome',\n  },\n\n  SEPIA: {\n    MIN: 0,\n    MAX: 1,\n    STEP: 0.1,\n    START: 1,\n    FILTER: 'sepia',\n    EFFECT: 'effects__preview--sepia',\n\n  },\n\n  MARVIN: {\n    MIN: 0,\n    MAX: 100,\n    STEP: 1,\n    START: 100,\n    FILTER: 'invert',\n    EFFECT: 'effects__preview--marvin',\n    NAME: 'marvin',\n  },\n\n  PHOBOS: {\n    MIN: 0,\n    MAX: 3,\n    STEP: 0.1,\n    START: 3,\n    FILTER: 'blur',\n    EFFECT: 'effects__preview--phobos',\n    NAME: 'phobos',\n  },\n\n  HEAT: {\n    MIN: 1,\n    MAX: 3,\n    STEP: 0.1,\n    START: 3,\n    FILTER: 'brightness',\n    EFFECT: 'effects__preview--heat',\n  },\n\n  NONE: {\n    MIN: 0,\n    MAX: 0.1,\n    STEP: 0,\n    START:0,\n    FILTER: 'none',\n    EFFECT: 'effects__preview--none',\n  }\n};\n\nconst effectLevel = document.querySelector('.img-upload__effect-level');\nconst effectLevelValue = document.querySelector('.effect-level__value');\nconst effectSlider = document.querySelector('.effect-level__slider');\nconst effectRadioGroup = document.querySelector('.img-upload__effects');\n\nconst resetSettingEffects = () => {\n  previewImage.style.filter = SettingsSlide.NONE.FILTER;\n  previewImage.classList.remove(previewImage.classList[0]);\n  previewImage.classList.add(SettingsSlide.NONE.EFFECT);\n  effectLevel.classList.add('visually-hidden');\n};\n\nresetSettingEffects();\n\nnoUiSlider.create(effectSlider, {\n  range: {\n    min: 0,\n    max: 100,\n  },\n  behaviour: 'snap',\n  connect: [true, false],\n  start: 80,\n  step: 1,\n});\n\neffectRadioGroup.addEventListener('change', (evt) => {\n  previewImage.classList.remove(previewImage.classList[0]);\n  const sliderSetting = SettingsSlide[evt.target.value.toUpperCase()];\n  previewImage.classList.add(sliderSetting.EFFECT);\n\n  if (evt.target.value === SettingsSlide.NONE.FILTER) {\n\n    effectLevel.classList.add('visually-hidden');\n\n  } else {\n\n    effectLevel.classList.remove('visually-hidden');\n  }\n\n  effectSlider.noUiSlider.updateOptions({\n    range: {\n      min: sliderSetting.MIN,\n      max: sliderSetting.MAX,\n    },\n    start: sliderSetting.START,\n    step: sliderSetting.STEP,\n    format: {\n      to: function (value) {\n        if (Number.isInteger(value)) {\n          return value.toFixed(0);\n        }\n        return value.toFixed(1);\n      },\n      from: function (value) {\n        return parseFloat(value);\n      },\n    },\n  });\n\n  effectSlider.noUiSlider.on('update', (value, handle) => {\n    effectLevelValue.value = value[handle];\n    if (evt.target.value === SettingsSlide.NONE.FILTER) {\n      previewImage.style.filter = SettingsSlide.NONE.FILTER;\n\n    } else {\n      let units = '';\n      switch (evt.target.value) {\n        case SettingsSlide.MARVIN.NAME:\n          units = '%';\n          break;\n        case SettingsSlide.PHOBOS.NAME:\n          units = 'px';\n          break;\n      }\n      previewImage.style.filter = `${sliderSetting.FILTER}(${effectLevelValue.value}${units})`;\n    }\n  });\n});\n\nexport {resetSettingEffects};\n","import {body} from './big-picture.js';\nimport {resetSettingEffects} from './effects.js';\nimport {resetSettingScal} from './scale.js';\nimport {Keys} from './util.js';\n\nconst uploadModal = document.querySelector('.img-upload__overlay');\nconst uploadInput = document.querySelector('#upload-file');\nconst uploadClose = document.querySelector('#upload-cancel');\n\n\n//Появляется окно редактирования\nuploadInput.addEventListener('change', () => {\n  uploadModal.classList.remove('hidden');\n  body.classList.add('modal-open');\n});\n\n//Сброс настроек\nconst resetSetting = () => {\n  resetSettingScal();\n  resetSettingEffects();\n};\n\n//Закрытие окна редактирования\nconst closeUploadModal = () => {\n  uploadModal.classList.add('hidden');\n  body.classList.remove('modal-open');\n  uploadInput.value = '';\n};\n\n//Закрытие окна редактирования на кнопку \"крестик\"\nuploadClose.addEventListener('click', () => {\n  closeUploadModal();\n  resetSetting();\n});\n\n//Закрытие окна на кнопку ESCAPE\ndocument.addEventListener('keydown', (evt) => {\n  if (evt.key === Keys.ESCAPE || evt.key === Keys.ESC) {\n    closeUploadModal();\n    resetSetting();\n  }\n});\n\nexport {closeUploadModal, resetSetting};\n","import {\n  Keys\n} from './util.js';\n\nconst MAX_LENGTH_HASHTAG = 20;\nconst MAX_HASHTAGS = 5;\nconst MAX_SYMBOLS = 140;\nconst regExp = /^[а-яА-ЯёЁa-zA-Z0-9]+$/;\n\nconst hashtagsInput = document.querySelector('.text__hashtags');\nconst commentText = document.querySelector('.text__description');\n\nhashtagsInput.addEventListener('input', () => {\n  hashtagsInput.setCustomValidity('');\n\n  let inputText = hashtagsInput.value.toLowerCase().trim();\n\n  if (!inputText) {\n    return;\n  }\n\n  const arrayHashtags = inputText.split(' ');\n\n  if (arrayHashtags.length === 0) {\n    return;\n  }\n\n  arrayHashtags.forEach(str => {\n    if (str[0] !== '#') {\n      hashtagsInput.setCustomValidity('Хеш-тег должен начинаться с #');\n    }\n    if (str.slice(1).search(regExp) == -1) {\n      hashtagsInput.setCustomValidity('Строка после решётки должна состоять из букв и чисел, перед # стоять пробел');\n    }\n    if (str == '#') {\n      hashtagsInput.setCustomValidity('Хеш-тег не может состоять только из одной решётки');\n    }\n    if (str.length > MAX_LENGTH_HASHTAG) {\n      hashtagsInput.setCustomValidity('Максимальная длина хештега 20 символов');\n    }\n  });\n\n\n  if (arrayHashtags.length > MAX_HASHTAGS) {\n    hashtagsInput.setCustomValidity('Нельзя указывать больше 5 хеш-тегов');\n  }\n\n\n  const countItems = arrayHashtags.reduce((acc, item) => {\n    acc[item] = acc[item] ? acc[item] + 1 : 1;\n    return acc;\n  }, {});\n\n  const arrayCountItems = Object.values(countItems);\n\n  if (arrayCountItems[0] > 1) {\n    hashtagsInput.setCustomValidity('Один и тот же хеш-тег не может быть использован дважды');\n  }\n});\n\ncommentText.addEventListener('input', () => {\n\n  const commentFieldText = commentText.value;\n\n  if (commentFieldText.length > MAX_SYMBOLS) {\n    commentText.setCustomValidity('Длинна комментария не может составлять больше 140 символов');\n  } else {\n    commentText.setCustomValidity('');\n  }\n});\n\nconst onEscDown = (evt) => {\n  if (evt.key === Keys.ESCAPE || evt.key === Keys.ESC) {\n    evt.preventDefault();\n    evt.stopPropagation();\n  }\n};\n\nhashtagsInput.addEventListener('keydown', onEscDown);\ncommentText.addEventListener('keydown', onEscDown);\n","const Urls = {\n  GET: 'https://22.javascript.pages.academy/kekstagram/data',\n  POST: 'https://22.javascript.pages.academy/kekstagram',\n};\n\n//Функция для отправки заапроса на сервер и подгружения информации\nconst request = (onSuccess, onError, method, data) => {\n  fetch(\n    Urls[method],\n    {\n      method: method,\n      body: data,\n    },\n  )\n    .then((response) => response.json())\n    .then((photos) => {\n      onSuccess(photos);\n    }).catch(() => {\n      onError();\n    });\n};\n\nexport { request };\n","import {request} from './fetch.js';\nimport {closeUploadModal, resetSetting} from './editor.js';\nimport {Keys} from './util.js';\n\n\nconst uploadImgForm = document.querySelector('.img-upload__form');\nconst errorMessage = document.querySelector('#error').content;\nconst successMessage = document.querySelector('#success').content;\nconst main = document.querySelector('main');\n\n//Сообщение об успешной отправке\nconst createSuccessMessage = () => {\n  const success = successMessage.cloneNode(true);\n  document.addEventListener('keydown', escapeSuccessMessageHandler);\n  document.addEventListener('click', closeSuccessMessageHandler);\n  main.appendChild(success);\n};\n\n//Закрытие сообщения об успешхе клавишей Esc\nconst escapeSuccessMessageHandler = (evt) => {\n  const modalMessage = main.querySelector('.success');\n  evt.preventDefault();\n  if (evt.key === Keys.ESCAPE || evt.key === Keys.ESC) {\n    modalMessage.remove();\n  }\n\n  document.removeEventListener('keydown', escapeSuccessMessageHandler);\n  document.removeEventListener('click', closeSuccessMessageHandler);\n};\n\n//Закрытие сообщения об успехе кликом\nconst closeSuccessMessageHandler = () => {\n  const modalMessage = main.querySelector('.success');\n  modalMessage.remove();\n  document.removeEventListener('click', closeSuccessMessageHandler);\n  document.removeEventListener('keydown', escapeSuccessMessageHandler);\n};\n\n//Сообщение об ошибке\nconst createErrorMessage = () => {\n  const error = errorMessage.cloneNode(true);\n  document.addEventListener('keydown', escapeErrorMessageHandler);\n  document.addEventListener('click', closeErrorMessageHandler);\n  main.appendChild(error);\n};\n\n//Закрытие сообщения c ошибкой клавишей Esc\nconst escapeErrorMessageHandler = (evt) => {\n  const errorModalMessage = main.querySelector('.error');\n  evt.preventDefault();\n  if (evt.key === Keys.ESCAPE || evt.key === Keys.ESC) {\n    errorModalMessage.remove();\n  }\n\n  document.removeEventListener('keydown', escapeErrorMessageHandler);\n  document.removeEventListener('click', closeErrorMessageHandler);\n};\n\n//Закрытие сообщения с ошибкой кликом\nconst closeErrorMessageHandler = () => {\n  const errorModalMessage = main.querySelector('.error');\n  errorModalMessage.remove();\n\n  document.removeEventListener('click', closeErrorMessageHandler);\n  document.removeEventListener('keydown', escapeErrorMessageHandler);\n};\n\nconst onSuccess = () => {\n  closeUploadModal();\n  resetSetting();\n  createSuccessMessage();\n};\n\nconst onError = () => {\n  closeUploadModal();\n  resetSetting();\n  createErrorMessage();\n};\n\nuploadImgForm.addEventListener('submit', (evt) => {\n  evt.preventDefault();\n  request(onSuccess, onError, uploadImgForm.method.toUpperCase(), new FormData(uploadImgForm));\n});\n","// import { photos } from './data.js';\nimport { showBigPicture } from './big-picture.js';\n\nconst photosList = document.querySelector('.pictures');\nconst photosTemplate = document.querySelector('#picture').content.querySelector('.picture');\n\n//Заполняет разметку фотографии,  добавлет открытие фотографии в большом размере по клику\nconst createPhoto = (picture => {\n  const photoElement = photosTemplate.cloneNode(true);\n  photoElement.querySelector('.picture__img').src = picture.url;\n  photoElement.querySelector('.picture__likes').textContent = picture.likes;\n  photoElement.querySelector('.picture__comments').textContent = picture.comments.length;\n\n\n  photoElement.addEventListener('click', (evt) => {\n    evt.preventDefault();\n    showBigPicture(picture);\n  });\n  return photoElement;\n});\n\n//Заполняет разметку фотографиями\nconst createPhotos = (photos) => {\n  const photosFragment = document.createDocumentFragment();\n  photos.forEach((photo) => {\n    photosFragment.appendChild(createPhoto(photo));\n  });\n\n  photosList.appendChild(photosFragment);\n};\n\nexport { createPhotos };\n","import {\n  createPhotos\n} from './preview.js';\nimport {\n  shuffleArray,\n  debounce\n} from './util.js';\n\nconst DEFAULT_PREVIEW_LOAD = 25;\nconst RANDOM_PREVIEW_LOAD = 10;\n\nconst imgFilter = document.querySelector('.img-filters');\nlet photos = [];\n\nconst removeActiveClass = () => {\n  let activeFilter = document.querySelector('.img-filters__button--active');\n  activeFilter.classList.remove('img-filters__button--active');\n};\n\nconst removePhotos = () => {\n  const images = document.querySelectorAll('.picture');\n  if (images) {\n    images.forEach(element => {\n      element.remove();\n    });\n  }\n};\n\nconst filters = {\n  'filter-default': () => {\n    createPhotos(photos.slice(0, DEFAULT_PREVIEW_LOAD));\n  },\n  'filter-random': () => {\n    createPhotos(shuffleArray(photos.slice()).slice(0, RANDOM_PREVIEW_LOAD));\n\n  },\n  'filter-discussed': () => {\n    createPhotos(photos.slice().sort((a, b) => {\n      return b.comments.length - a.comments.length;\n    }));\n  },\n};\n\nconst onSuccess = (data) => {\n  imgFilter.classList.remove('img-filters--inactive');\n  photos = data.slice();\n  createPhotos(photos.slice(0, DEFAULT_PREVIEW_LOAD));\n};\n\nconst onFilterClick = debounce((evt) => {\n\n  if (evt.target.classList.contains('img-filters__button')) {\n    removeActiveClass();\n    removePhotos();\n    evt.target.classList.add('img-filters__button--active');\n    filters[evt.target.id]();\n  }\n});\n\nimgFilter.addEventListener('click', onFilterClick);\n\nexport {\n  onSuccess\n};\n","import './util.js';\nimport './big-picture.js';\nimport './editor.js';\nimport './scale.js';\nimport './effects.js';\nimport './validation.js';\nimport './submit-form.js';\nimport './filter.js';\nimport './load-image.js';\nimport { onSuccess } from './filter.js';\nimport {showModalError} from './error.js';\nimport { request } from './fetch.js';\n\nconst onError = () => {\n  showModalError('Не удалось получить данные c сервера. Попробуйте позже.');\n};\n\nrequest(onSuccess, onError, 'GET');\n\n","const SHOW_TIME = 6000;\n\n//Окно с ошибкой о получении данных\nconst showModalError = (message) => {\n  const alertContainer = document.createElement('div');\n  alertContainer.style.zIndex = '1000';\n  alertContainer.style.position = 'absolute';\n  alertContainer.style.left = '0';\n  alertContainer.style.top = '0';\n  alertContainer.style.right = '0';\n  alertContainer.style.padding = '25px 3px';\n  alertContainer.style.fontSize = '35px';\n  alertContainer.style.textAlign = 'center';\n  alertContainer.style.backgroundColor = 'red';\n\n  alertContainer.textContent = message;\n\n  document.body.append(alertContainer);\n\n  setTimeout(() => {\n    alertContainer.remove();\n  }, SHOW_TIME);\n};\n\nexport { showModalError };\n"],"names":["FILE_TYPES","uploadInput","document","querySelector","previewImage","previews","querySelectorAll","addEventListener","file","files","fileName","name","toLowerCase","some","it","endsWith","reader","FileReader","src","result","forEach","filter","style","backgroundImage","readAsDataURL","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","Keys","bigPicture","body","closingBigPicture","commentCount","commentsLoader","commentsList","commentsTemplate","content","commentsLoaded","commentsCount","closeBigPicture","classList","add","remove","innerHTML","createComments","comments","length","slice","textContent","commentsFragment","createDocumentFragment","comment","appendChild","commentElement","cloneNode","avatar","alt","message","createComment","once","scaleControlSmaller","scaleControlBigger","scaleControlValue","typingScaleValue","scaleValue","value","transform","parseInt","SettingsSlide","CHROME","MIN","MAX","STEP","START","FILTER","EFFECT","SEPIA","MARVIN","NAME","PHOBOS","HEAT","NONE","effectLevel","effectLevelValue","effectSlider","effectRadioGroup","resetSettingEffects","noUiSlider","create","range","min","max","behaviour","connect","start","step","evt","sliderSetting","target","toUpperCase","updateOptions","format","to","Number","isInteger","toFixed","from","parseFloat","on","handle","units","uploadModal","uploadClose","resetSetting","closeUploadModal","key","regExp","hashtagsInput","commentText","setCustomValidity","inputText","trim","arrayHashtags","split","str","search","countItems","reduce","acc","item","Object","values","onEscDown","preventDefault","stopPropagation","Urls","GET","POST","request","onSuccess","onError","method","data","fetch","then","response","json","photos","catch","uploadImgForm","errorMessage","successMessage","main","escapeSuccessMessageHandler","modalMessage","removeEventListener","closeSuccessMessageHandler","escapeErrorMessageHandler","errorModalMessage","closeErrorMessageHandler","success","createSuccessMessage","error","createErrorMessage","FormData","photosList","photosTemplate","createPhotos","photosFragment","photo","picture","photoElement","url","likes","description","showBigPicture","createPhoto","imgFilter","filters","array","temporaryValue","randomIndex","currentIndex","Math","floor","random","shuffleArray","sort","a","b","onFilterClick","cb","lastTimeout","args","window","clearTimeout","setTimeout","contains","images","element","removePhotos","id","debounce","alertContainer","createElement","zIndex","position","left","top","right","padding","fontSize","textAlign","backgroundColor","append","showModalError"],"sourceRoot":""}